(function(b){b.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};
function a(d){if(typeof d.data!=="string"){return}var c=d.handler,e=d.data.toLowerCase().split(" "),f=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color"];d.handler=function(o){if(this!==o.target&&o.which!=27&&(/textarea|select/i.test(o.target.nodeName)||b.inArray(o.target.type,f)>-1)){return}var j=o.type!=="keypress"&&b.hotkeys.specialKeys[o.which],p=String.fromCharCode(o.which).toLowerCase(),m,n="",h={};if(o.altKey&&j!=="alt"){n+="alt+"
}if(o.ctrlKey&&j!=="ctrl"){n+="ctrl+"}if(o.metaKey&&!o.ctrlKey&&j!=="meta"){n+="meta+"}if(o.shiftKey&&j!=="shift"){n+="shift+"}if(j){h[n+j]=true}else{h[n+p]=true;h[n+b.hotkeys.shiftNums[p]]=true;if(n==="shift+"){h[b.hotkeys.shiftNums[p]]=true}}for(var k=0,g=e.length;k<g;k++){if(h[e[k]]){return c.apply(this,arguments)}}}}b.each(["keydown","keyup","keypress"],function(){b.event.special[this]={add:a}})})(jQuery);
/*
 *jQuery UI Spinner 1.23
 *
 *Copyright (c) 2009-2010 Brant Burnett
 *Copyright (c) 2010 Johannes Geppert http://www.jgeppert.com
 *Dual licensed under the MIT or GPL Version 2 licenses.
 *
 *  Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 */
(function(g,h){var i="ui-state-active",s="ui-state-hover",e="ui-state-disabled",k=g.ui.keyCode,m=k.UP,n=k.DOWN,r=k.RIGHT,f=k.LEFT,j=k.PAGE_UP,p=k.PAGE_DOWN,q=k.HOME,d=k.END,l=g.browser.msie,c=g.browser.mozilla?"DOMMouseScroll":"mousewheel",o=".uispinner",a=[m,n,r,f,j,p,q,d,k.BACKSPACE,k.DELETE,k.TAB],b;
g.widget("ui.spinner",{options:{min:null,max:null,allowNull:false,group:"",point:".",prefix:"",suffix:"",places:null,defaultStep:1,largeStep:10,mouseWheel:true,increment:"slow",className:null,showOn:"always",width:16,upIconClass:"ui-icon-triangle-1-n",downIconClass:"ui-icon-triangle-1-s",format:function(w,v){var u=this,x=/(\d+)(\d{3})/,t=((isNaN(w)?0:Math.abs(w)).toFixed(v))+"";for(t=t.replace(".",u.point);x.test(t)&&u.group;t=t.replace(x,"$1"+u.group+"$2")){}return(w<0?"-":"")+u.prefix+t+u.suffix
},parse:function(u){var t=this;if(t.group=="."){u=u.replace(".","")}if(t.point!="."){u=u.replace(t.point,".")}return parseFloat(u.replace(/[^0-9\-\.]/g,""))}},_create:function(){var u=this,t=u.element,v=t.attr("type");if(!t.is("input")||((v!="text")&&(v!="number"))){console.error("Invalid target for ui.spinner");return}u._procOptions(true);u._createButtons(t);if(!t.is(":enabled")){u.disable()}},_createButtons:function(E){function D(W){return W=="auto"?0:parseInt(W,10)}var H=this,x=H.options,v=x.className,N=x.width,y=x.showOn,C=g.support.boxModel,I=E.outerHeight(),R=H.oMargin=D(E.css("margin-right")),A=H.wrapper=E.css({width:(H.oWidth=(C?E.width():E.outerWidth()))-N,marginRight:0,textAlign:"right"}).after("<span class='ui-spinner ui-widget' style='top:0;left:0;'></span>").next(),L=H.btnContainer=g("<div class='ui-spinner-buttons'><div class='ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr'><span class='ui-icon "+x.upIconClass+"'>&nbsp;</span></div><div class='ui-spinner-down ui-spinner-button ui-state-default ui-corner-br'><span class='ui-icon "+x.downIconClass+"'>&nbsp;</span></div></div>"),w,u,Q,V,F,B,G,P,J,O,z=E[0].dir=="rtl";
if(v){A.addClass(v)}A.append(L.css({height:I,left:-N-R,top:(E.offset().top-A.offset().top)+"px"}));Q=H.buttons=L.find(".ui-spinner-button");Q.css({width:N-(C?Q.outerWidth()-Q.width():0),height:I/2-(C?Q.outerHeight()-Q.height():0)});w=Q[0];u=Q[1];V=Q.find(".ui-icon");V.css({marginLeft:(Q.innerWidth()-V.width())/2,marginTop:(Q.innerHeight()-V.height())/2});L.width(Q.outerWidth());if(y!="always"){L.css("opacity",0)}E.addClass("ui-spinner-input").attr({role:"textbox"});if(y=="hover"||y=="both"){Q.add(E).bind("mouseenter"+o,function(){T(function(){G=true;
if(!H.focused||(y=="hover")){H.showButtons()}})}).bind("mouseleave"+o,function K(){T(function(){G=false;if(!H.focused||(y=="hover")){H.hideButtons()}})})}function U(){if(!x.disabled){var W=H.element[0],X=(this===w?1:-1);W.focus();W.select();g(this).addClass(i);O=true;H._startSpin(X)}return false}function S(){if(O){g(this).removeClass(i);H._stopSpin();O=false}return false}Q.hover(function(){H.buttons.removeClass(s);if(!x.disabled){g(this).addClass(s)}},function(){g(this).removeClass(s)}).mousedown(U).mouseup(S).mouseout(S);
if(l){Q.dblclick(function(){if(!x.disabled){H._change();H._doSpin((this===w?1:-1)*x.step)}return false}).bind("selectstart",function(){return false})}E.bind("keydown"+o,function(aa){var X,Y,W,Z=aa.keyCode;if(aa.ctrl||aa.alt){return true}if(t(Z)){J=true}if(P){return false}switch(Z){case m:case j:X=1;Y=Z==j;break;case n:case p:X=-1;Y=Z==p;break;case r:case f:X=(Z==r)^z?1:-1;break;case q:W=H.options.min;if(W!==null){H._setValue(W)}return false;case d:W=H.options.max;W=H.options.max;if(W!==null){H._setValue(W)
}return false}if(X){if(!P&&!x.disabled){keyDir=X;g(X>0?w:u).addClass(i);P=true;H._startSpin(X,Y)}return false}}).bind("keyup"+o,function(W){if(W.ctrl||W.alt){return true}if(t(k)){J=false}switch(W.keyCode){case m:case r:case j:case n:case f:case p:Q.removeClass(i);H._stopSpin();P=false;return false}}).bind("keypress"+o,function(W){if(M(W.keyCode,W.charCode)){return false}}).bind("change"+o,function(){H._change()}).bind("focus"+o,function(){function W(){H.element.select()}if(l){W()}else{setTimeout(W,0)
}H.focused=true;b=H;if(!G&&(y=="focus"||y=="both")){H.showButtons()}}).bind("blur"+o,function(){H.focused=false;if(!G&&(y=="focus"||y=="both")){H.hideButtons()}});function t(X){for(var W=0;W<a.length;W++){if(a[W]==X){return true}}return false}function M(Z,W){if(J){return false}var Y=String.fromCharCode(W||Z),X=H.options;if((Y>="0")&&(Y<="9")||(Y=="-")){return false}if(((H.places>0)&&(Y==X.point))||(Y==X.group)){return false}return true}function T(X){if(F){if(X===B){return}clearTimeout(F)}function W(){F=0;
X()}B=X;F=setTimeout(W,100)}},_procOptions:function(A){var B=this,y=B.element,C=B.options,w=C.min,x=C.max,v=C.step,t=C.places,u=-1,z;if(C.increment=="slow"){C.increment=[{count:1,mult:1,delay:250},{count:3,mult:1,delay:100},{count:0,mult:1,delay:50}]}else{if(C.increment=="fast"){C.increment=[{count:1,mult:1,delay:250},{count:19,mult:1,delay:100},{count:80,mult:1,delay:20},{count:100,mult:10,delay:20},{count:0,mult:100,delay:20}]}}if((w===null)&&((z=y.attr("min"))!==null)){w=parseFloat(z)}if((x===null)&&((z=y.attr("max"))!==null)){x=parseFloat(z)
}if(!v&&((z=y.attr("step"))!==null)){if(z!="any"){v=parseFloat(z);C.largeStep*=v}}C.step=v=v||C.defaultStep;if((t===null)&&((z=v+"").indexOf(".")!=-1)){t=z.length-z.indexOf(".")-1}B.places=t;if((x!==null)&&(w!==null)){if(w>x){w=x}u=Math.max(Math.max(u,C.format(x,t,y).length),C.format(w,t,y).length)}if(A){B.inputMaxLength=y[0].maxLength}z=B.inputMaxLength;if(z>0){u=u>0?Math.min(z,u):z;z=Math.pow(10,u)-1;if((x===null)||(x>z)){x=z}z=-(z+1)/10+1;if((w===null)||(w<z)){w=z}}if(u>0){y.attr("maxlength",u)
}C.min=w;C.max=x;B._change();y.unbind(c+o);if(C.mouseWheel){y.bind(c+o,B._mouseWheel)}},_mouseWheel:function(u){var t=g.data(this,"spinner");if(!t.options.disabled&&t.focused&&(b===t)){t._change();t._doSpin(((u.wheelDelta||-u.detail)>0?1:-1)*t.options.step);return false}},_setTimer:function(v,u,x){function w(){t._spin(u,x)}var t=this;t._stopSpin();t.timer=setInterval(w,v)},_stopSpin:function(){if(this.timer){clearInterval(this.timer);this.timer=0}},_startSpin:function(w,x){var u=this,v=u.options,t=v.increment;
u._change();u._doSpin(w*(x?u.options.largeStep:u.options.step));if(t&&t.length>0){u.counter=0;u.incCounter=0;u._setTimer(t[0].delay,w,x)}},_spin:function(v,w){var u=this,t=u.options.increment,x=t[u.incCounter];this._trigger("beforeSpin",event,{item:this.selectedItem});u._doSpin(v*x.mult*(w?u.options.largeStep:u.options.step));u.counter++;this._trigger("afterSpin",event,{item:this.selectedItem});if((u.counter>x.count)&&(u.incCounter<t.length-1)){u.counter=0;x=t[++u.incCounter];u._setTimer(x.delay,v,w)
}},_doSpin:function(u){var t=this,v=t.curvalue;if(v===null){v=(u>0?t.options.min:t.options.max)||0}t._setValue(v+u)},_parseValue:function(){var t=this.element.val();return t?this.options.parse(t,this.element):null},_validate:function(w){var u=this.options,v=u.min,t=u.max;if((w===null)&&!u.allowNull){w=this.curvalue!==null?this.curvalue:v||t||0}if((t!==null)&&(w>t)){return t}else{if((v!==null)&&(w<v)){return v}else{return w}}},_change:function(){var u=this,w=u._parseValue(),v=u.options.min,t=u.options.max;
if(!u.selfChange){if(isNaN(w)){w=u.curvalue}u._setValue(w,true)}},_setOption:function(t,u){g.Widget.prototype._setOption.call(this,t,u);this._procOptions()},increment:function(){this._doSpin(this.options.step)},decrement:function(){this._doSpin(-this.options.step)},showButtons:function(u){var t=this.btnContainer.stop();if(u){t.css("opacity",1)}else{t.fadeTo("fast",1)}},hideButtons:function(u){var t=this.btnContainer.stop();if(u){t.css("opacity",0)}else{t.fadeTo("fast",0)}this.buttons.removeClass(s)
},_setValue:function(v,t){var u=this;u.curvalue=v=u._validate(v);u.element.val(v!==null?u.options.format(v,u.places,u.element):"");if(!t){u.selfChange=true;u.element.change();u.selfChange=false}},value:function(t){if(arguments.length){this._setValue(t);return this.element}return this.curvalue},enable:function(){this.buttons.removeClass(e);this.element[0].disabled=false;g.Widget.prototype.enable.call(this)},disable:function(){this.buttons.addClass(e).removeClass(s);this.element[0].disabled=true;g.Widget.prototype.disable.call(this)
},destroy:function(t){this.wrapper.remove();this.element.unbind(o).css({width:this.oWidth,marginRight:this.oMargin});g.Widget.prototype.destroy.call(this)}})})(jQuery);(function(f){var d=f.fn.domManip,c="(function(){try{return $1;}catch(err){if(err.name==='ReferenceError'||err.name==='TypeError'){return undefined;}throw err;}}.call(this))",a="var _params = '$2'.split(/,\\s?/), _context = undefined; if(_params.length){ _context = {}; $.each(_params, function (_i, _item) { _context[_item] = eval(_item) }); }",b=/((<<|>?>>|[&\*\+-\/\^\|])?=|\+\+|--|\{|\}|\[)/,e=/\b(break|(cas|els|continu|delet|whil)e|(ca|swi)tch|with|default|do|finally|try|for|var|function|return|if|new|throw|void)\b/;
f.fn.extend({render:function(g){return this.map(function(j,h){return f.render(h,g)})},domManip:function(g){if(g.length>1&&g[0].nodeType){arguments[0]=[f.makeArray(g)]}if(g.length===2&&typeof g[0]==="string"&&typeof g[1]!=="string"){arguments[0]=[f.render(g[0],g[1])]}return d.apply(this,arguments)}});f.extend({render:function(h,k){var i;if(f.templates[h]){i=f.templates[h]}else{if(h.nodeType){var j=h,g=f.data(j);if(!(i=g.tmpl)){f.data(j,"tmpl",i=f.tmpl(j.innerHTML))}}}i=i||f.tmpl(h);if(f.isArray(k)){return f.map(k,function(m,l){return $(i.call(m,f,m,l)).get()
})}else{return $(i.call(k,f,k,0)).get()}},templates:{},tmplcmd:{each:{_default:[null,"$i"],prefix:"(function(){var $first=true;jQuery.each($1,function($2){ $CONTEXT with(this){",suffix:"}$first=false});}).call(this);"},"if":{prefix:"if($SAFE){",suffix:"}"},ifdef:{prefix:"if( typeof($SAFE) !== 'undefined' ){",suffix:"}"},ifndef:{prefix:"if( typeof($SAFE) === 'undefined' ){",suffix:"}"},"else":{prefix:"}else{"},elseif:{prefix:"}else if($SAFE){",suffix:"}"},"with":{_default:["",""],prefix:"(function($2){ $CONTEXT ",suffix:"}.call(this,$SAFE))"},include:{prefix:"_.push(String($1) in $.templates?$.templates[$1].call(this, $, typeof _context !== 'undefined' ? _context : _.data):'');"},html:{prefix:"_tmp=$SAFE;_.push(typeof _tmp==='function'?_tmp.call(this):_tmp);"},"=":{_default:["this"],prefix:"_tmp=$SAFE;_.push($.encode(typeof _tmp==='function'?_tmp.call(this):_tmp));"}},encode:function(g){return g==null?"":(g+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;")
},tmpl:function(y,B,A){var l=y;var g=/(\\(?!["'])|[\n\r\b\t])/g,r=function(i){var m=i.charCodeAt(0).toString(16);return"\\u0000".substring(0,6-m.length)+m};y=y.replace(/\{#("(\"|[^"])*?"|'(\'|[^'])*?'|[\S\s])*?#\}/g,"");y=y.replace(/\${([^}]*)}/g,"{{= $1}}");var z,o=[],v=["var $=jQuery,_=[],_tmp;","_.data=$data;","_.index=$i||0;","with($data){"];while(z=y.match(/^([\s\S]*?){{\s*(\/?)(\w+|\S)(?:\s+([\s\S]*?))?(?:\s+as\s+(.*?))?\s*}}/)){if(z[1]){v.push("_.push('"+z[1].replace(g,r)+"');")}var x=z[2],j=z[3],h=z[4],t=z[5];
var q=f.tmplcmd[j];if(!q){throw ReferenceError("Template tag not found: "+j)}var w=/\\([}|{])/g;if(h&&w.test(h)){h=h.replace(w,"$1")}if(h&&/['"]/.test(h)){h=h.replace(/(")((?:\\"|[^"])*?)"|(')((?:\\'|[^'])*?)'/g,function(m,i,E,D,s){return(i||D)+(E||s||"").replace(g,r)+(i||D)})}if(h||t){var n,k=(h+" "+t).replace(/"(?:\\"|[^"])*?"|'(?:\\'|[^'])*?'|[!=]=+|([^<>])[><]=|\b\[/g,"$1"),C=z[0].substr((z[1]||"").length);if((n=k.match(b))){throw SyntaxError('Illegal template operator "'+n[0]+'" in '+C)}else{if(n=k.match(e)){throw SyntaxError('Illegal reserved word "'+n[0]+'" in '+C)
}}}var C,u=q._default||[];if(q.prefix&&q.suffix){if(x){C=o.pop();if(!C||C[0]!==j){throw SyntaxError('Unexpected termination by "'+j+'".')}h=C[1];t=C[2]}else{o.push([j,h,t])}}v.push(q[x?"suffix":"prefix"].split("$CONTEXT").join(a).split("$SAFE").join(c).split("$1").join(h||u[0]).split("$2").join(t||u[1]));y=y.substr(z[0].length)}if(y){v.push("_.push('"+y.replace(g,r)+"');")}v.push("}","return _.join('');");var p=new Function("jQuery","$data","$i",v.join("\n"));return B?f(p.call(this,f,B,A)).get():p
}})})(jQuery);function prettyDate(d){var e=(d||"").replace(/-\d{2}:\d{2}/g," ").replace(/[TZ]/g," "),b=new Date(e),c=(((new Date()).getTime()-b.getTime())/1000),a=Math.floor(c/86400);if(isNaN(a)||a<0||a>=31){return}return a==0&&(c<60&&"just now"||c<120&&"1 minute ago"||c<3600&&Math.floor(c/60)+" minutes ago"||c<7200&&"1 hour ago"||c<86400&&Math.floor(c/3600)+" hours ago")||a==1&&"Yesterday"||a<7&&a+" days ago"||a<31&&Math.ceil(a/7)+" weeks ago"}if(typeof jQuery!="undefined"){jQuery.fn.prettyDate=function(){return this.each(function(){var a=prettyDate(this.title);
if(a){jQuery(this).text(a)}})}}window.log=function(){log.history=log.history||[];log.history.push(arguments);if(this.console){console.log(Array.prototype.slice.call(arguments))}};window.ify=function(){return{link:function(a){return a.replace(/[a-z]+:\/\/[a-z0-9-_]+\.[a-z0-9-_:~%&\?\/.=]+[^:\.,\)\s*$]/ig,function(b){return'<a href="'+b+'">'+((b.length>25)?b.substr(0,24)+"...":b)+"</a>"})},at:function(a){return a.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15})/g,function(b,d,c){return d+'@<a href="http://twitter.com/'+c+'">'+c+"</a>"
})},hash:function(a){return a.replace(/(^|[^\w'"]+)\#([a-zA-Z0-9_]+)/g,function(b,d,c){return d+'<a href="http://search.twitter.com/search?q=%23'+c+'">#'+c+"</a>"})},clean:function(a){return this.hash(this.at(this.link(a)))}}}();window.readCookie=function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null};window.createCookie=function(c,d,e){if(e){var b=new Date();
b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"};(function(b){var a=b.write;b.write=function(c){log("document.write(): ",arguments);if(/docwriteregexwhitelist/.test(c)){a.apply(b,arguments)}}})(document);function Tracker(f,d,a,b,e){var c=this;this.title=f;this.configurationTemplate="<fieldset>"+d+"</fieldset>";this.defaultData=a;this.template='<div class="body">'+b+"</div>";this.process=function(){return e.apply(c,arguments)
}}function JsonpTracker(f,d,a,c,b){var e=new Tracker(f,d,a,c,function(j,h,g){var i=function(m,k,l){if(k){g();j.append("errorTemplate",{})}};$.ajax($.extend({dataType:"jsonp",error:i},b(this,j,h,g)))});return e}function YqlTracker(f,d,b,a,c){var e=new JsonpTracker(f,d,b,c,function(i,j,h,g){return{url:"http://query.yahooapis.com/v1/public/yql",data:{q:i.formatQuery(h),format:"json"},success:function(k){g();if(k&&k.query&&k.query.count>0){j.append(e.template,$.extend(h,k.query.results))}else{j.append("errorTemplate",{})
}j.fadeTo(1,1)}}});e.formatQuery=a;return e}var trackers=[new YqlTracker("RSS Feed",'<div><label>Title:</label><input name="title" type="text" value="${title}" /></div><div><label>RSS:</label><input name="rssUrl" value="${rssUrl}" type="url" /></div><div><label>Limit:</label><input name="limit" type="number" value="${limit}" min="1" max="50" /></div>',{title:"Yahoo Top Stories",rssUrl:"http://rss.news.yahoo.com/rss/topstories",limit:3},function(a){return"select * from rss(0,"+a.limit+') where url="'+a.rssUrl+'"'
},'<h3>${title}</h3><ol>{{each item}}<li><a href="${link}">${title}</a></li>{{/each}}</ol>'),new JsonpTracker("Twitter Search",'<div><label>Search:</label><input name="searchTerm" type="text" value="${searchTerm}" /></div><div><label>Limit:</label><input name="limit" type="number" value="${limit}" min="1" max="100" /></div>',{searchTerm:"#newTwitter",limit:5},'<h3>Twitter Search: ${unescape(query)}</h3><ol class="TwitterSearch">{{each results}}<li><img src="${profile_image_url}" alt="${from_user}" /><a href="http://twitter.com/${from_user}">${from_user}</a>: {{html ify.clean(text)}}</li>{{/each}}</ol>',function(e,g,b,a){var d=$(e).data("refresh_url");
var c="http://search.twitter.com/search.json";var f={result_type:"recent",rpp:b.limit,q:b.searchTerm};if(d&&d.match(new RegExp("q="+escape(b.searchTerm)))){c=d;f={}}return{url:c,data:f,success:function(h){a();g.data("refresh_url",h.refresh_url).append(e.template,h).fadeTo(1,1)}}}),new JsonpTracker("Google Blog Search",'<div><label>Search:</label><input name="searchTerm" type="text" value="${searchTerm}" /></div><div><label>Limit:</label><input name="limit" type="number" value="${limit}" min="1" max="8" /></div>',{searchTerm:"googlewhack",limit:5},'<h3>Google Blog Search: ${searchTerm}</h3><ol>{{each results}}<li><h3><a href="${url}">{{html title}}</a></h3>{{html content}}</li>{{/each}}</ol>',function(c,d,b,a){return{url:"http://www.google.com/uds/GblogSearch",data:{v:"1.0",scoring:"d",rsz:b.limit,q:b.searchTerm},success:function(e){a();
d.append(c.template,$.extend(b,e.responseData)).fadeTo(1,1)}}}),new JsonpTracker("Google News Search",'<div><label>Search:</label><input name="searchTerm" type="text" value="${searchTerm}" /></div><div><label>Limit:</label><input name="limit" type="number" value="${limit}" min="1" max="8" /></div>',{searchTerm:"war",limit:5},'<h3>Google News Search: ${searchTerm}</h3><ol>{{each results}}<li><h3><a href="${url}">{{html title}}</a></h3>{{html content}}</li>{{/each}}</ol>',function(c,d,b,a){return{url:"http://www.google.com/uds/GnewsSearch",data:{v:"1.0",scoring:"d",rsz:b.limit,q:b.searchTerm},success:function(e){a();
d.append(c.template,$.extend(b,e.responseData)).fadeTo(1,1)}}}),new JsonpTracker("GitHub Project Commits",'<div><label>User:</label><input name="userName" type="text" value="${userName}" /></div><div><label>Repository:</label><input name="repository" type="text" value="${repository}" /></div><div><label>Branch:</label><input name="branch" type="text" value="${branch}" /></div><div><label>Limit:</label><input name="limit" type="number" value="${limit}" min="1" max="35" /></div>',{userName:"git",repository:"git",branch:"master",searchType:"commits",limit:5},'<h3>Commits for ${userName}/${repository}:${branch}</h3><ol>{{each commits}}<li><a href="${url}">${prettyDate(committed_date)}</a> - ${author.name}: ${message}</li>{{/each}}</ol>',function(c,d,b,a){return{url:"http://github.com/api/v2/json/commits/list/"+b.userName+"/"+b.repository+"/"+b.branch,success:function(e){a();
e.commits=e.commits.slice(0,b.limit);d.append(c.template,$.extend(b,e)).fadeTo(1,1)}}}),new JsonpTracker("GitHub Project Issues",'<div><label>User:</label><input name="userName" type="text" value="${userName}" /></div><div><label>Repository:</label><input name="repository" type="text" value="${repository}" /></div><div><label>Limit:</label><input name="limit" type="number" value="${limit}" min="1" max="35" /></div>',{userName:"git",repository:"git",branch:"master",searchType:"commits",limit:5},"<h3>Issues for ${userName}/${repository}</h3><ol>{{each issues}}<li>${prettyDate(created_at)} - ${user}: ${title}</li>{{/each}}</ol>",function(c,d,b,a){return{url:"http://github.com/api/v2/json/issues/list/"+b.userName+"/"+b.repository+"/open",success:function(e){a();
e.issues=e.issues.reverse().slice(0,b.limit);d.append(c.template,$.extend(b,e)).fadeTo(1,1)}}}),new Tracker("Target Date",'<div><label>Target Date:</label><input name="targetDate" type="date" value="${targetDate}" /></div><div><label>Title:</label><input name="title" type="text" value="${title}" /></div>',{targetDate:$.datepicker.formatDate("mm/dd/yy",new Date()),title:"Important Deadline"},'<h3>${title}</h3><span class="count">${days}</span> days ${description}',function(e,b,a){a();var c=new Date(b.targetDate.toString().replace(/-\d{2}:\d{2}/g," ").replace(/[TZ]/g," ")),d=(((new Date()).getTime()-c.getTime())/1000),f=Math.floor(d/86400);
if(isNaN(f)){return}b.days=Math.abs(f);b.description=f>0?" days ago":" days left";e.append(this.template,b).fadeTo(1,1)}),new YqlTracker("Weather",'<div><label>Zip Code:</label><input name="zipCode" type="text" value="${zipCode}" /></div><div><label>Current:</label><input name="currentConditions" type="checkbox" checked="${currentConditions}" /></div><div><label>Forecast:</label><input name="forecast" type="checkbox" checked="${forecast}" /></div>',{zipCode:"80301",currentConditions:true,forecast:true},function(a){return"select * from weather.forecast where location="+a.zipCode
},"<h3>Weather in ${channel.location.city}, ${channel.location.region}</h3>{{if currentConditions}}<h4>Current Conditions</h4><ol><li><strong>${channel.item.condition.temp}&deg; ${channel.units.temperature}</strong>{{if channel.item.condition.temp != channel.wind.chill}} ${channel.wind.chill}&deg; ${channel.units.temperature} wind chill{{/if}}</li><li>${channel.wind.speed} ${channel.units.speed} wind, ${channel.atmosphere.humidity}% humidity</li></ol>{{/if}}{{if forecast}}<h4>Forecast</h4><ol>{{each channel.item.forecast}}<li><h4>${day}: ${high}&deg; ${channel.units.temperature} / ${low}&deg; ${channel.units.temperature}</h4>${text}</li>{{/each}}</ol>{{/if}}")];
var board=(function(){var j={version:"0.0.3"};var t={drawerOpen:false,refreshRate:10,plusServer:"trackboardplus.heroku.com"};var e=[];var g=[];var p=false;var b=false;var i;var h;var n;var l="boardState";var f="settings";var k=[{keys:"h shift+?",description:"This menu",action:function(){board.displayHelp()}},{keys:"ctrl+z meta+z",event:"keydown",description:"Undo",action:function(){board.undo()}},{keys:"space",event:"keydown",description:"Opens and closes the tracker drawer",action:function(v){$("#trackerHandle input").click();
v.preventDefault()}},{keys:"esc",event:"keydown",description:"Hides this menu or closes the active widget editor",action:function(){board.escape()}},{keys:"left j n",event:"keydown",description:"Moves widget selection left",action:function(){board.moveWidgetSelection("←")}},{keys:"right k p",event:"keydown",description:"Moves widget selection right",action:function(){board.moveWidgetSelection("→")}},{keys:"up",event:"keydown",description:"Moves tracker selection up",action:function(v){board.moveTrackerSelection("↑",v)
}},{keys:"down",event:"keydown",description:"Moves tracker selection down",action:function(v){board.moveTrackerSelection("↓",v)}},{keys:"o e",description:"Opens the widget editor",action:function(v){board.openWidgetEditor();v.preventDefault()}},{keys:"backspace del",event:"keydown",description:"Removes the current widget",action:function(){board.removeActiveWidget()}}];var d=function(w){var x={};var v=".editor input[type!=button]";var y=function(){var z=$(this);x[this.name]=z.is(":checkbox")?z.attr("checked"):z.val()
};if(w){$(w).find(v).each(y)}else{$("#configuration"+v).each(y)}return x};var q=function(A,x,w,y){var v=true;var B;if(w.jquery){B=$(w)}else{B=$('<li class="widget"><div class="body">Loading...</div></li>');if(typeof(y)!="undefined"){if(y==0){$(w).prepend(B)}else{$(w+" .widget:eq("+(y-1)+")").after(B)}}else{B.appendTo(w)}}var z=function(){if(!v){B.stop().fadeIn();return}B.fadeTo(500,0.5,function(){B.fadeTo(500,1,z)})};z();A.process(B,x,function(){v=false;B.stop().find(".body").remove()});return B};
var u=function(){$("#trackers").slideDown();$(this).val("↑");board.updateSetting("drawerOpen",true)};var s=function(){$("#trackers").slideUp();$(this).val("↓");board.updateSetting("drawerOpen",false)};var c=function(y,x,w){if(b){return}var v=e.splice(w);e=e.concat({queryData:y,trackerTitle:x},v);r()};var m=function(x,w,v){e[$("#board .widget").index(x)]={queryData:w,trackerTitle:v};r()};var r=function(){if(p){$.ajax({type:"POST",dataType:"json",url:"http://"+t.plusServer+"/board",data:JSON.stringify(e),error:function(x,v,w){console.log(v)
}});return}if(!Modernizr.localstorage){return}localStorage.setItem(l,JSON.stringify(e))};var o=function(){$.extend($.templates,{toolbarTemplate:$.tmpl('<div class="toolbar"><a href="#" class="remove">X</a><a href="#" class="edit">∆</a></div>'),errorTemplate:$.tmpl('<div class="body">There was an error loading this tracker</div>'),configurationButtons:$.tmpl('<div class="buttons"><input id="previewMenu" name="previewMenu" class="addTracker" value="Preview" type="submit"><input id="goMenu" name="goMenu" class="addTracker" value="Add" type="button"></div>'),editButtons:$.tmpl('<div class="buttons"><input class="saveTracker" value="Update" type="submit"><input class="cancel" value="Cancel" type="button"></div>')});
$(trackers).each(function(){$("#trackers ul").append('<li><a href="#">'+this.title+"</a></li>")});$("#footerTemplate").render($.extend(t,j)).appendTo("footer");$("#helpTemplate").render({shortcuts:k}).appendTo("#container").hide();$("header h1 a").click(function(v){v.preventDefault();board.displayHelp()});$("#board").sortable({placeholder:"ui-state-highlight dropPlaceholder",forcePlaceholderSize:true,handle:".body",start:function(v,w){n=$("#board .widget").index(w.item)},update:function(w,x){var v=$("#board .widget").index(x.item);
var y=e[n];e[n]=e[v];e[v]=y;r()}});$(k).each(function(){$(document).bind(this.event||"keypress",this.keys,this.action)})};var a=function(){$(e).each(function(){var w=this,v=$.grep(trackers,function(x){return x.title==w.trackerTitle})[0];if(v){board.createWidget(v,w.queryData)}});b=false};return{load:function(){b=true;o();p=t.plusServer&&t.plusServer==window.location.host;if(!readCookie("lastVisited")){board.displayIntroduction()}createCookie("lastVisited",new Date(),365);if(Modernizr.localstorage){v=localStorage.getItem(f);
if(v){t=$.extend(t,$.parseJSON(v))}if(!p){var v=localStorage.getItem(l);if(v){a(e=$.parseJSON(v))}else{b=false}}}if(p){$.getJSON("http://"+t.plusServer+"/board",function(x){e=x;a()})}var w=$("#trackerHandle input");if(t.drawerOpen){u.call(w);w.toggle(s,u)}else{w.toggle(u,s)}i=setInterval(this.updateWidgets,t.refreshRate*1000)},removeWidgetData:function(x){var w=$("#board .widget").index(x);var v=e.splice(w,1)[0];r();g.push({action:"remove",index:w,widgetState:v});$("#undoMessage").fadeIn();board.removeUndoMessage()
},createWidget:function(x,v,w){v=v||d();var y=q(x,v,"#board",w);y.data({tracker:x,data:v}).prepend("toolbarTemplate",{}).attr("draggable","true");c(v,x.title,w)},updateWidgets:function(){$("#board .widget:not(.introduction)").each(function(){var w=$(this);var v=w.data();q(v.tracker,v.data,w)})},updateWidget:function(x){var v=d(x);var w=x.data().tracker;q(w,v,x);x.data("data",v);m(x,v,w.title)},displayPreview:function(x,w){var v="#results";$(v).empty();q(x,w||d(),v)},updateSetting:function(v,w){t[v]=w;
if(!Modernizr.localstorage){return}localStorage.setItem(f,JSON.stringify(t))},displayIntroduction:function(){$("#introductionTemplate").render($.extend(t,j)).appendTo("#board")},stopUpdating:function(){clearInterval(i)},undo:function(){if(g.length==0){return}var x=g.pop();switch(x.action){case"remove":var w=x.widgetState;var v=$.grep(trackers,function(y){return y.title==w.trackerTitle})[0];board.createWidget(v,w.queryData,x.index);break}if(g.length==0){$("#undoMessage").fadeOut()}},removeUndoMessage:function(){h=setTimeout(function(){$("#undoMessage").fadeOut()
},5000)},keepUndoMessage:function(){clearTimeout(h)},displayHelp:function(){$("#helpDialog").toggle()},hideHelp:function(){$("#helpDialog").hide()},escape:function(){if($("#helpDialog:visible").length){board.hideHelp();return}$(".activeWidget .cancel").click()},moveWidgetSelection:function(x){var w=$(".activeWidget");var v;switch(x){case"←":v=w.length?w.prev():$("#board .widget").last();break;case"→":v=w.length?w.next():$("#board .widget").first();break}w.removeClass("activeWidget");v.addClass("activeWidget")
},moveTrackerSelection:function(x,v){if($("#trackerDrawer").height()==0){return}v.preventDefault();var w=$(".activeTracker");switch(x){case"↑":targetTracker=w.length?w.prev():$("#trackers li").last();break;case"↓":targetTracker=w.length?w.next():$("#trackers li").first();break}targetTracker.click().find("a")[0].focus()},openWidgetEditor:function(){$(".activeWidget .edit").click()},removeActiveWidget:function(){$(".activeWidget .remove").click()}}}());$("#board .widget").live("click",function(a){if($(this).is(".activeWidget")){return
}$("#board .activeWidget").removeClass("activeWidget");$(this).addClass("activeWidget")});$(".remove").live("click",function(a){a.preventDefault();var b=$(this).parents(".widget");board.removeWidgetData(b);b.fadeOut(function(){$(this).remove()})});$("#board .editor").live("submit",function(a){a.preventDefault();board.updateWidget($(this).parents(".widget"))});$(".cancel").live("click",function(){$(this).parents(".editor").remove()});$(".edit").live("click",function(c){c.preventDefault();var d=$(this).parents(".widget");
if(d.has(".editor").length){return}var b=d.data();var a=b.tracker;d.prepend('<form class="editor">'+a.configurationTemplate+'{{include "editButtons"}}</form>',b.data);enhanceInputs(d);d.find("input:first, select:first").focus()});$("#trackers ul li").live("click",function(b){b.preventDefault();var a=trackers[$("#trackers ul li").index(this)];$("#trackers .activeTracker").removeClass("activeTracker");$(this).addClass("activeTracker");$("#trackers .editor").html($.render(a.configurationTemplate+'{{include "configurationButtons"}}',a.defaultData)).unbind("submit").submit(function(c){c.preventDefault();
board.displayPreview(a)});enhanceInputs("#trackers");$("#goMenu").click(function(){board.createWidget(a)});board.displayPreview(a,a.defaultData)});$("#undoMessage a").live("click",function(a){a.preventDefault();board.undo()});$("#undoMessage").live("mouseenter",function(){board.keepUndoMessage()});$("#undoMessage").live("mouseleave",function(){board.removeUndoMessage()});$("#helpDialog .closeDialog").live("click",function(a){a.preventDefault();board.hideHelp()});var enhanceInputs=function(d){if(!(Modernizr.inputtypes.number||$.browser.webkit)){var c=$(d).find(".editor input[type=number]");
c.spinner({min:c.attr("min"),max:c.attr("max"),showOn:"always"})}if(!Modernizr.inputtypes.date){var b=$(d).find(".editor input[type=date]");var e=b.map(function(){return $(this).attr("name")});var a=b.map(function(){return $(this).val()});b.replaceWith(function(f){return'<input type="text" class="date" name="'+e[f]+'" value="'+$.datepicker.formatDate("mm/dd/yy",new Date(a[f]))+'" />'});$(d).find(".editor .date").datepicker({showAnim:"fadeIn"})}};$(board.load);